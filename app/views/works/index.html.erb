<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>無題ドキュメント</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
<style type="text/css">
.wrapper {
    display: flex;
    justify-content: space-around;
    flex-wrap: wrap;
    align-content: flex-start;
    gap: 20px 0px;
}
.box {
    width: 300px;
    height: 200px;
    background-color: #FFFFFF;
    position: relative;
}
.box .textbox {
    background-color: rgba(191,191,191,0.70);
    width: 100%;
    height: 40%;
    position: absolute;
    bottom: 0%;
    display: flex;
    flex-direction: column;
    justify-content: space-around;
}
.box .img {
    width: nil;
    height: 100%;
    display: block; 
    margin: auto;
}

.box .textbox .comic_title {
    width: 100%;
    height: 80%;
    font-size: 150%;
    margin-left: 2%;
}

.box .textbox .category {
    width: 100%;
    height: 20%;
    font-size: 70%;
    margin-top: 2%;
    margin-left: 2%;
}

.box_empty {
	width: 300px;
    height: 0px;
}

.selecter{
  	display: flex;
  	background-color:rgb(229, 253, 253);
    align-items: center;
}	

.selecter .selectbox {
    -webkit-appearance: none; /*--各ブラウザのCSSを解除--*/
    -moz-appearance: none;/*--各ブラウザのCSSを解除--*/
    appearance: none;/*--各ブラウザのCSSを解除--*/
	margin: 1em 0;
    padding: .8em 1em;
    font-size: 16px;
    border-radius: 30px;
    border: solid 2px #ccc;
    background-repeat: no-repeat;
    background-size: 180px 10px;
    background-position: right 20px center;
    background-color: #fff;
    margin-bottom: 1em;
    margin-top: 1em;
    margin-left: 1em;
    margin-right: 1em;
}
</style>
</head>

<body>
<script>
//最下段の左寄せ用関数
//横一列分の高さ0のbox_emptyを最下段に配置,あとはflexboxにお任せ
//boxの幅によって繰り返し回数要変更
$(function() {
	var $flex = $('.wrapper'),
	$empty = '<div class="box_empty"></div>';
		
	for(let i = 0; i < 5; i++){
		$flex.append($empty);
	}
});
</script>
<!-- 
ページ最上部に表示するメニュー的なもの.headerにしても良かったけど
-->
<div class="selecter">
    <!-- 漫画ソート用のプルダウンメニュー.':category_id'に選択したカテゴリーのidが格納されてindex再読み込み. -->
    <!-- submitはjsで自動化できるっぽい. -->
    <%= form_tag works_path, method: :get do %>
        <%= select_tag :category_id, options_from_collection_for_select(@category, :id, :name, @selected ), include_blank: false, class: 'selectbox'%>
        <%= submit_tag "Filter" %>
    <% end %>
    <!-- ソートされたカテゴリーの作品投稿数表示 -->
    <div>投稿数: <%= @works.count%></div>
</div>

<!-- 漫画表示部分.ほぼflexboxにおまかせ -->
<div class="wrapper">
    <% @works.each do |work| %>
        <div class="box">
            <div class="textbox"> 
                <div class="category"><%= work.category.name %></div>
                <div class="comic_title"><%= work.main_title %></div>
            </div> 
            <%= image_tag(work.image, class: "img") %>
        </div>
    <% end %>
</body>
</html>
